

version: "3"
services:
  mqtt:
      image: toke/mosquitto
      container_name: mqtt
      expose:
        - 1883
      ports:
        - 1883:1883
      restart: unless-stopped
  redis:
      image: redis
      container_name: redis
      expose:
        - 6379
      ports:
        - 6379:6379
  web:
    build: FrontEnd/.
    container_name: web-front-end
    environment:
      - REDIS_IP_ADDRESS=redis
    ports:
      - "9002:80"
    depends_on:
      - redis
  datahighway:
    build: DataHighway/.
    container_name: datahighway
    environment:
      - REDIS_IP_ADDRESS=redis
      - MQTT_IP_ADDRESS=mqtt
    depends_on:
      - redis
      - mqtt
  session_gen:
    build: SessionGen/.
    container_name: session_gen
    environment:
      - MQTT_IP_ADDRESS=mqtt
    depends_on:
      - mqtt
